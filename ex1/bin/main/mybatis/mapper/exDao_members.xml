<?xml version="1.0" encoding="UTF-8"?>

 <!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.example.demo.dao.IDao_members">
	
	<select id="login_ok" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members WHERE user_id = #{param1} 
	</select>

	<insert id="join_ok"> 
			INSERT INTO members (user_index, user_id, user_pw, user_name, user_email, user_phone, user_address, postcode, user_grade, user_point, user_gender, user_birth, buying_price, join_date) VALUES (0, #{user_id}, #{user_pw}, #{user_name}, #{user_email}, #{user_phone}, #{user_address}, #{user_postcode}, "앵두", 0, #{user_gender},#{user_birth}, 0, default)
	</insert>

	<select id="check_pw" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members WHERE user_id = #{param1} 
	</select>
	
	<select id="listDao" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members ORDER BY user_index desc
	</select>

	<select id="list_page_1" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members ORDER BY user_index desc LIMIT 0, 10
	</select>
	
	<select id="list_page_2" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members ORDER BY user_index desc LIMIT #{param1}, 10
	</select>
		
	<delete id="delete_member"> 
			DELETE FROM members WHERE user_id = #{param1}
	</delete>
	
	<select id="count_total" resultType="_int">
			SELECT COUNT(*) FROM members
	</select>
	
	<select id="count_1" resultType="_int">
			SELECT COUNT(*) FROM members WHERE user_grade = "앵두"
	</select>
	
	<select id="count_2" resultType="_int">
			SELECT COUNT(*) FROM members WHERE user_grade = "자두"
	</select>
	
	<select id="count_3" resultType="_int">
			SELECT COUNT(*) FROM members WHERE user_grade = "복숭아"
	</select>
	
	<select id="count_4" resultType="_int">
			SELECT COUNT(*) FROM members WHERE user_grade = "과일매니저"
	</select>
	
	<select id="detail_search1" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members 
			WHERE join_date BETWEEN #{date_min} AND #{date_max}
			AND buying_price BETWEEN #{buying_min} AND #{buying_max} 
			AND user_point BETWEEN #{point_min} AND #{point_max}
			AND user_grade = #{grade} 
			ORDER BY user_index desc
	</select> 

	<select id="detail_search2" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members 
			WHERE join_date BETWEEN #{date_min} AND #{date_max}
			AND buying_price BETWEEN #{buying_min} AND #{buying_max} 
			AND user_point BETWEEN #{point_min} AND #{point_max}
			ORDER BY user_index desc
	</select>
	
	<select id="detail_search3" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members 
			WHERE join_date BETWEEN #{date_min} AND #{date_max}
			AND buying_price BETWEEN #{buying_min} AND #{buying_max} 
			AND user_point BETWEEN #{point_min} AND #{point_max}
			AND user_name like CONCAT('%',#{search_text},'%')
			ORDER BY user_index desc
	</select>
	
	<select id="detail_search4" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members 
			WHERE join_date BETWEEN #{date_min} AND #{date_max}
			AND buying_price BETWEEN #{buying_min} AND #{buying_max} 
			AND user_point BETWEEN #{point_min} AND #{point_max}
			AND user_grade = #{grade} 
			AND user_name like CONCAT('%',#{search_text},'%')
			ORDER BY user_index desc
	</select>
	
	<select id="detail_search5" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members 
			WHERE join_date BETWEEN #{date_min} AND #{date_max}
			AND buying_price BETWEEN #{buying_min} AND #{buying_max} 
			AND user_point BETWEEN #{point_min} AND #{point_max}
			AND user_id like CONCAT('%',#{search_text},'%')
			ORDER BY user_index desc
	</select>

	<select id="detail_search6" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members 
			WHERE join_date BETWEEN #{date_min} AND #{date_max}
			AND buying_price BETWEEN #{buying_min} AND #{buying_max} 
			AND user_point BETWEEN #{point_min} AND #{point_max}
			AND user_grade = #{grade} 
			AND user_id like CONCAT('%',#{search_text},'%')
			ORDER BY user_index desc
	</select>	
	
	<select id="detail_search7" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members 
			WHERE join_date BETWEEN #{date_min} AND #{date_max}
			AND buying_price BETWEEN #{buying_min} AND #{buying_max} 
			AND user_point BETWEEN #{point_min} AND #{point_max}
			AND user_phone like CONCAT('%',#{search_text},'%')
			ORDER BY user_index desc
	</select>

	<select id="detail_search8" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members 
			WHERE join_date BETWEEN #{date_min} AND #{date_max}
			AND buying_price BETWEEN #{buying_min} AND #{buying_max} 
			AND user_point BETWEEN #{point_min} AND #{point_max}
			AND user_grade = #{grade} 
			AND user_phone like CONCAT('%',#{search_text},'%')
			ORDER BY user_index desc
	</select>	

	<select id="detail_search9" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members 
			WHERE join_date BETWEEN #{date_min} AND #{date_max}
			AND buying_price BETWEEN #{buying_min} AND #{buying_max} 
			AND user_point BETWEEN #{point_min} AND #{point_max}
			AND user_birth like CONCAT('%',#{search_text},'%')
			ORDER BY user_index desc
	</select>

	<select id="detail_search10" resultType="com.example.demo.dto.dto_members"> 
			SELECT * FROM members 
			WHERE join_date BETWEEN #{date_min} AND #{date_max}
			AND buying_price BETWEEN #{buying_min} AND #{buying_max} 
			AND user_point BETWEEN #{point_min} AND #{point_max}
			AND user_grade = #{grade} 
			AND user_birth like CONCAT('%',#{search_text},'%')
			ORDER BY user_index desc
	</select>	
	
	<select id="checkId" resultType="_int">
    		SELECT COUNT(*) FROM members WHERE user_id=#{param1}
	</select>

	<select id="checkEmail" resultType="_int">
    		SELECT COUNT(*) FROM members WHERE user_email=#{param1}
	</select>	
		
	<select id="member_detail" resultType="com.example.demo.dto.dto_members">
			SELECT * FROM members WHERE user_index = #{param1}
	</select>
	
	
	
	
	
	
	
</mapper>
